!function(e){"use strict";e.HeO2_legacy||(e.HeO2_legacy=Object.create(null))}(window),function(e){"use strict";e.HeO2_legacy.CONST={DEBUG:!0,AJAX_HEADER_JSON:{accept:"application/json",contentType:"application/json; charset=UTF-8"},UI_CLASSES:{INPUT_STYLE:"input",CUSTOM_INPUT:"_ui_is-input",PROPERTIES_EDITOR_INPUT:"_ui_is-properties-editor",TAGS_INPUT:"_ui_is-tags",SKIP_INPUT:"_ui_skip-input"},VK_CODES:{CANCEL:3,HELP:6,BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CONTROL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,SEMICOLON:59,EQUALS:61,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CONTEXT_MENU:93,NUMPAD0:96,NUMPAD1:97,NUMPAD2:98,NUMPAD3:99,NUMPAD4:100,NUMPAD5:101,NUMPAD6:102,NUMPAD7:103,NUMPAD8:104,NUMPAD9:105,NUMPAD_MULTIPLY:106,NUMPAD_ADD:107,NUMPAD_SEPARATOR:108,NUMPAD_SUBTRACT:109,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,F16:127,F17:128,F18:129,F19:130,F20:131,F21:132,F22:133,F23:134,F24:135,NUM_LOCK:144,SCROLL_LOCK:145,EQUAL:187,COMMA:188,DASH:189,PERIOD:190,SLASH:191,BACK_QUOTE:192,OPEN_BRACKET:219,BACK_SLASH:220,CLOSE_BRACKET:221,QUOTE:222,META:224}}}(window),function(e,t){"use strict";e.hasOwnProperty("create")&&!t.__unittest__||(e.create=function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return e.prototype=t,new e}}())}(Object,HeO2_legacy),function(e,t){"use strict";e.prototype.hasOwnProperty("bind")&&!t.__unittest__||(e.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this;return function(){return n.apply(this instanceof function(){}?this:e,t.concat(Array.prototype.slice.call(arguments)))}})}(Function,HeO2_legacy),Object.hasOwnProperty("keys")&&!HeO2_legacy.__unittest__||(Object.keys=function(){"use strict";var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(i){if("object"!=typeof i&&("function"!=typeof i||null===i))throw new TypeError("Object.keys called on non-object");var s,o,a=[];for(s in i)e.call(i,s)&&a.push(s);if(t)for(o=0;o<r;o++)e.call(i,n[o])&&a.push(n[o]);return a}}()),function(e){e.hasOwnProperty("isInteger")&&!HeO2_legacy.__unittest__||(e.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e})}(Number),function(e){"use strict";HTMLInputElement.prototype.hasOwnProperty("checkValidity")&&!e.__unittest__||(HTMLInputElement.prototype.checkValidity=function(){return!!this.disabled||!(void 0!==this.attributes.required&&""===this.value)})}(HeO2_legacy),function(e){"use strict";HTMLInputElement.prototype.hasOwnProperty("setSelectionRange")&&!e.__unittest__||(HTMLInputElement.prototype.setSelectionRange=function(e,t){var n=this.createTextRange();e===t?n.move("character",caretPos):(n.moveStart("character",e),n.moveEnd("character",t)),n.select()})}(HeO2_legacy),function(e){e.HTMLElement.prototype.getImmediateText=function(){for(var e="",t=this.childNodes.length,n=0;n<t;++n)"#text"===this.childNodes[n].nodeName&&(e+=this.childNodes[n].nodeValue.trim());return e}}(window),function(e,t){"use strict";t(e.document).ready(function(){t('select[name="lang"]').change(function(){t.ajax({method:"POST",url:e.serverUrl+"api/config/lang",data:{lang:t(this).val()},success:function(){location.reload()}})})})}(window,jQuery),function(e){"use strict";function t(){}function n(e,t){return o[e]?this[e]?(console.warn("Class | Component '"+e+"' is already loaded"),!1):(this[e]=Object.create(o[e].prototype),this[e].init&&this[e].init.apply(this[e],[this].concat(t)),this[e]):(console.error("Class | Cannot find component with name '"+e+"'"),!1)}function r(e,t){var n=Object.create(e);return n.init&&n.init.apply(n,[this].concat(t)),n}var i=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/,s=Object.create(null),o=Object.create(null);t.prototype._loadComponent=function(e){var t=Array.prototype.slice.call(arguments,1);return"string"==typeof e?n.call(this,e,t):r.call(this,e,t)},t.prototype._talk=function(e){var t=[];if("undefined"!=typeof s[e])for(var n=s[e].length;--n>=0;){var r=s[e][n],i=r.callback.apply(r.context,Array.prototype.slice.call(arguments,1));"undefined"!=typeof i&&t.push(i),r.oneOff&&s[e].splice(n,1)}return t.length?t.length>1?t:t[0]:null},t.prototype._listen=function(e,t,n,r){if(n=n||null,r=r||!1,"undefined"==typeof t)throw new Error("Class | Callback is undefined");s[e]=s[e]||[],s[e].push({callback:t,context:n,oneOff:r})},t.prototype._stopListening=function(e,t){if("undefined"!=typeof s[e])for(var n=0,r=s[e].length;n<r;++n)if(s[e][n].callback===t){s[e].splice(n,1);break}},t.extend=function(n){var r=this.prototype,s=Object.create(r);for(var o in n)s[o]="function"==typeof n[o]&&"function"==typeof r[o]&&i.test(n[o])?function(t,n){return function(){var i=this._super;if(this===e)throw new Error("Instance has no context, did you forget new?");this._super=r[t];var s=n.apply(this,arguments);return this._super=i,s}}(o,n[o]):n[o];var a="function"==typeof s.init?s.init:function(){};return a.prototype=s,s.constructor=a,a.extend=t.extend,a},t.registerComponent=function(e,t){return o[e]?(console.warn("Class | Component '"+e+"' is already registered"),!1):void(o[e]=t)},e.Class=t}(HeO2_legacy),function(e,t){"use strict";e.Config=e.Class.extend({_config:null,_configLoaded:!1,_deferred:null,init:function(e){void 0!==e&&this.load(e)},get:function(e){if(void 0!==this._config[e])return this._config[e];for(var t=e.split("."),n=this._config,r=0,i=t.length;r<i;++r)if(void 0===n[t[r]])console.warn("WARNING: Invalid key: "+e);else{if(r===i-1)return n[t[r]];n=n[t[r]]}},load:function(e){return null!==this._deferred?this._deferred.promise():(this._deferred=t.getJSON(e).done(function(e){this._config=e,this._configLoaded=!0}.bind(this)).fail(function(){console.error("ERROR: Cannot load configuration "+e)}),this._deferred.promise())}}),e.config=new e.Config}(HeO2_legacy,jQuery),function(e){"use strict";e.HeO2_legacy.EventingClass=e.HeO2_legacy.Class.extend({_eventing:null,init:function(){this._eventing=Object.create(null),this._eventing.events=Object.create(null),this._eventing.emitting=!1,this._eventing.offIndex=null},emit:function(e,t){var n=[];if(void 0!==this._eventing.events[e]){var r=!0,i={stopEvent:function(){r=!1},sender:this};this._eventing.emitting=!0;for(var s=0,o=this._eventing.events[e].length;s<o&&r;++s){var a=this._eventing.events[e][s];a&&("function"==typeof a.callable&&(a.callable.apply(a.context||this,Array.prototype.concat(Array.prototype.slice.call(arguments,1),[i])),null!==this._eventing.offIndex&&(--o,this._eventing.offIndex<=s&&--s)),a.oneOff&&n.push(s))}if(this._eventing.emitting=!1,n.length)for(var s=0,o=n.length;s<o;++s)this._off(e,n[s])}return this},off:function(e,t){if(void 0!==this._eventing.events[e])for(var n in this._eventing.events[e])this._eventing.events[e][n].callable===t&&this._off(e,n);return this},on:function(e,t,n,r){return n=n||null,r=r||!1,void 0===this._eventing.events[e]&&(this._eventing.events[e]=[]),this._eventing.events[e].push({callable:t,context:n,oneOff:r}),this},_off:function(e,t){this._eventing.events[e].splice(t,1),this._eventing.emitting&&(this._eventing.offIndex=t)}})}(window),String.prototype.trim=function(e){return e=e||" \f\n\r\t\x0BÂ \u2028\u2029",this.replace(new RegExp("^["+e+"]+|["+e+"]+$","g"),"")},function(e){"use strict";function t(){return"undefined"==typeof t.prototype.__instance&&(t.prototype.__instance=new(e.HeO2_legacy.EventingClass.extend())),t.prototype.__instance}e.PubSub=t}(window),function(e){function t(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function n(e,t){for(var n=[];t>0;n[--t]=e);return n.join("")}var r=function(){return r.cache.hasOwnProperty(arguments[0])||(r.cache[arguments[0]]=r.parse(arguments[0])),r.format.call(null,r.cache[arguments[0]],arguments)};r.format=function(e,i){var s,o,a,u,c,l,h,f=1,p=e.length,d="",_=[];for(o=0;o<p;o++)if(d=t(e[o]),"string"===d)_.push(e[o]);else if("array"===d){if(u=e[o],u[2])for(s=i[f],a=0;a<u[2].length;a++){if(!s.hasOwnProperty(u[2][a]))throw r('[sprintf] property "%s" does not exist',u[2][a]);s=s[u[2][a]]}else s=u[1]?i[u[1]]:i[f++];if(/[^s]/.test(u[8])&&"number"!=t(s))throw r("[sprintf] expecting number but found %s",t(s));switch(u[8]){case"b":s=s.toString(2);break;case"c":s=String.fromCharCode(s);break;case"d":s=parseInt(s,10);break;case"e":s=u[7]?s.toExponential(u[7]):s.toExponential();break;case"f":s=u[7]?parseFloat(s).toFixed(u[7]):parseFloat(s);break;case"o":s=s.toString(8);break;case"s":s=(s=String(s))&&u[7]?s.substring(0,u[7]):s;break;case"u":s=~s+1;break;case"x":s=s.toString(16);break;case"X":s=s.toString(16).toUpperCase()}s=/[def]/.test(u[8])&&u[3]&&s>=0?"+"+s:s,l=u[4]?"0"==u[4]?"0":u[4].charAt(1):" ",h=u[6]-String(s).length,c=u[6]?n(l,h):"",_.push(u[5]?s+c:c+s)}return _.join("")},r.cache={},r.parse=function(e){for(var t=e,n=[],r=[],i=0;t;){if(null!==(n=/^[^\x25]+/.exec(t)))r.push(n[0]);else if(null!==(n=/^\x25{2}/.exec(t)))r.push("%");else{if(null===(n=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(t)))throw"[sprintf] huh?";if(n[2]){i|=1;var s=[],o=n[2],a=[];if(null===(a=/^([a-z_][a-z_\d]*)/i.exec(o)))throw"[sprintf] huh?";for(s.push(a[1]);""!==(o=o.substring(a[0].length));)if(null!==(a=/^\.([a-z_][a-z_\d]*)/i.exec(o)))s.push(a[1]);else{if(null===(a=/^\[(\d+)\]/.exec(o)))throw"[sprintf] huh?";s.push(a[1])}n[2]=s}else i|=2;if(3===i)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";r.push(n)}t=t.substring(n[0].length)}return r};var i=function(e,t,n){return n=t.slice(0),n.splice(0,0,e),r.apply(null,n)};e.sprintf=r,e.vsprintf=i}(HeO2_legacy),function(e){new(e.HeO2_legacy.Class.extend({_DEFAULT_EVENT:{length:8,include:{alpha:!0,numbers:!0,symbols:"",lower:!0,upper:!0}},_ALPHA_LOWER:"abcdefghijklmnopqrstuvwxyz",_ALPHA_UPPER:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",_NUMERIC:"1234567890",init:function(){this._listen("random-string",this._listener_randomString.bind(this))},_listener_randomString:function(t){return t=e.jQuery.extend(!0,{},this._DEFAULT_EVENT,t),t.generated=this._generate(t),t.generated},_buildAvailableString:function(e){var t="";return e.include.alpha&&(e.include.lower&&(t+=this._ALPHA_LOWER),e.include.upper&&(t+=this._ALPHA_UPPER)),e.include.numbers&&(t+=this._NUMERIC),t+e.include.symbols},_generate:function(e){for(var t=this._buildAvailableString(e),n="",r=e.length;--r>=0;)n+=t.charAt(Math.floor(Math.random()*(t.length-1)));return n}}))}(window),function(e){"use strict";e.Promise=e.EventingClass.extend({_arguments:null,_joined:null,_state:null,init:function(e){this._super(),this._joined=[],this._state="unresolved",e&&["success","fail","always"].forEach(function(t){e[t]&&e[t].forEach&&e[t].forEach(function(e){this.on(t,e)}.bind(this))}.bind(this))},fail:function(e){return this.on("fail",e),this},join:function(){for(var e=arguments.length;arguments[--e];)arguments[e]instanceof Array?this._joined=this._joined.concat(arguments[e]):this._joined.push(arguments[e]);return this},on:function(e,t,n,r){return r=!0,e===this._state||"unresolved"!==this._state&&"always"===e?(t.apply(event.context||this,this._arguments),this):void this._super(e,t,n,r)},reject:function(){return this._state="fail","unresolved"!==this._state&&(this._joined.forEach(function(e){e.reject.apply(e,arguments)}),this._arguments=Array.prototype.slice.call(arguments),this.emit.apply(this,Array.prototype.concat("fail",this._arguments)),this.emit.apply(this,Array.prototype.concat("always",this._arguments))),this},resolve:function(){var e=!0;return"unresolved"===this._state&&(this._state="success",this._joined.length&&(this._joined.forEach(function(t){"success"!==t.state()&&(e=!1)}),e&&this._joined.forEach(function(e){e.resolve.apply(e,arguments)})),e&&(this._arguments=Array.prototype.slice.call(arguments),this.emit.apply(this,Array.prototype.concat("success",this._arguments)),this.emit.apply(this,Array.prototype.concat("always",this._arguments)))),this},state:function(){return this._state},success:function(e){return this.on("success",e),this},then:function(e){return this.on("always",e),this}}),e.Promise.create=function(t){return new e.Promise(t)},e.Promise.when=function(){return(new e.Promise).join(Array.prototype.slice.call(arguments))}}(HeO2_legacy),function(e){"use strict";e.DelayedAsset=e.Promise.extend({_blob:null,_reader:null,init:function(e){this._super(),this._blob=e,this._reader=new FileReader,this._reader.onload=this._reader_load.bind(this),this._reader.onerror=this._reader_error.bind(this)},arrayBuffer:function(){return this._reader.readAsArrayBuffer(this._blob),this},binaryString:function(){return this._reader.readAsBinaryString(this._blob),this},dataUrl:function(){return this._reader.readAsDataURL(this._blob),this},text:function(){return this._reader.readAsText(this._blob),this},_reader_error:function(e){this.reject()},_reader_load:function(e){this.resolve({result:e.target.result})}}),e.DelayedAsset.create=function(t){return new e.DelayedAsset(t)}}(HeO2_legacy),function(e,t){"use strict";function n(e,r,i){--i;for(var s in r)if("function"!=typeof r.hasOwnProperty||r.hasOwnProperty(s)){var o=r[s];o instanceof Array?n(e[s]=[],o,i):!o||"object"!=typeof o||o instanceof HTMLElement||o instanceof t?e[s]=o:e[s]=i>0?n(e[s]||Object.create(null),o,i):Object.create(null)}return e}var r=10,i=/^(?:0.)?[1-9.+-]?[0-9]*\.?[0-9]+$/,s="${#}";e.Helper={concatUnique:function(){for(var e="boolean"==typeof arguments[0],t=e?arguments[0]&&arguments[+e]instanceof Array:!(arguments[+e]instanceof Array),n=Array.prototype.slice.call(arguments,+e+ +!t),r=t?[]:arguments[+e],i=0,s=n.length;i<s;++i)if(n[i]instanceof Array)for(var o=0,a=n[i].length;o<a;++o)r.indexOf(n[i][o])===-1&&r.push(n[i][o]);else r.indexOf(n[i])===-1&&r.push(n[i]);return r},currency:function(t){return e.Helper.isNumeric(t)?s.replace("{#}",t.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")):null},fromKeyCode:function(t){return t>=e.CONST.VK_CODES.NUMPAD0&&t<=e.CONST.VK_CODES.NUMPAD9&&(t-=48),String.fromCharCode(t)},isEmpty:function(e){if(""===e)return!0;if(void 0!==e.length)return 0===e.length;for(var t in e)return!1;return"object"==typeof e},isNumeric:function(e){return i.test(e)},merge:function(){for(var t="boolean"==typeof arguments[0]&&arguments[0],i=t&&"number"==typeof arguments[1],s=+!t||(i?arguments[1]:r),o=Array.prototype.slice.call(arguments,+t+ +i),a=e.Helper.isEmpty(o[0])?o[0]:Object.create(null),u=0,c=o.length;u<c;++u)n(a,o[u],s);return a}},e.Helper.currency.format=function(e){var t=s;return void 0!==e&&(s=e),t}}(HeO2_legacy,jQuery),function(e){"use strict";e.prototype.shuffle=function(){for(var e,t,n=this.length-1;n>0;--n)e=Math.floor(Math.random()*(n+1)),t=this[n],this[n]=this[e],this[e]=t;return this}}(Array),function(e){"use strict";function t(e){var t=Object.create(null);return void 0!==e.makeArray&&(t.makeArray=e.makeArray,delete e.makeArray),t}e.ObjectMapper={map:function(n,r){var i=t(r),s=i.makeArray?function(){this.mappedObjects.push(this.src)}:function(){void 0===this.mappedObjects[this.index]&&(this.mappedObjects[this.index]=Object.create(null)),this.mappedObjects[this.index][this.value]=this.src};if(r||"undefined"==typeof this._rules){if(!r)return null}else r=r||this._rules;n instanceof Array||(n=[n]);for(var o=[],a=n.length,u=0;u<a;++u)Object.keys(r).forEach(function(t){var i=r[t];"number"==typeof t&&(t=i.key,i=i.becomes);var a=e.ObjectParser.parse(t,n[u]);null===a&&(a=i,i=t),s.call({mappedObjects:o,index:u,src:a,prop:t,value:i})});return 1===o.length?o[0]:o}}}(HeO2_legacy),function(e){"use strict";e.ObjectParser={parse:function(e,t){for(var n=e.split("."),r=n.length,i=t,s=0;s<r;++s){if("undefined"==typeof i[n[s]])return null;i=i[n[s]]}return i}}}(HeO2_legacy),function(e){"use strict";e.ArraySearcher={search:function(t,n,r){if(t instanceof Array)for(var i=t.length,s=0;s<i;++s)if(e.ObjectParser.parse(n,t[s])===r)return t[s];return null}}}(HeO2_legacy),function(e){e.HeO2_legacy.ElementRequestor=e.HeO2_legacy.EventingClass.extend({_GRACE_PERIOD:500,init:function(e){this._pubsub=(new PubSub).on("request-element",this._this_elementRequest.bind(this)),this._queue=[],this._inGrace=!1,this._url=e},_ajax_success:function(e){for(var t=e.length,n=0;n<t;++n)null!==typeof e[n].requestId&&this._pubsub.emit("request-element-rendered-"+e[n].requestId,e[n].rendered)},_this_elementRequest:function(e,t,n){n=n||!1,n?this._request(new Array(e)):this._addToQueue(e,t)},_addToQueue:function(e,t){this._queue.push(e),this._inGrace||(this._inGrace=!0,setTimeout(function(){this._request(this._queue)}.bind(this),this._GRACE_PERIOD))},_request:function(t){$.ajax({method:"post",url:this._url,headers:e.HeO2_legacy.CONST.AJAX_HEADER_JSON,data:{elements:t},success:this._ajax_success.bind(this)})}})}(window),function(e){"use strict";e.HeO2_legacy.ElementLump=e.HeO2_legacy.Class.extend({_MATCH_REGEX:/[a-zA-Z\d]+(?=%)/g,init:function(e){"string"==typeof e?this._processMarkup(e):void 0!==e&&(this._parsed=e,this._indexed=arguments[1])},clone:function(){return new e.HeO2_legacy.ElementLump(this._clone(),this._indexed)},get:function(e){return void 0!==e?this._update(this._clone(),e):this._parsed},setMarkup:function(e){this._processMarkup(e)},_clone:function(){for(var e=this._parsed.length,t=[],n=0;n<e;++n)t.push(this._parsed[n].cloneNode(!0));return t},_createIndex:function(e,t){this._indexed[e]instanceof Array||(this._indexed[e]=[])},_getNode:function(e,t){for(var n=e,r=t.length,i=0;i<r;++i)n=void 0!==n.children?n.children[t[i]]:n[t[i]];return n},_index:function(e,t){e=e||this._parsed,t=t||"";for(var n=e.length,r=0;r<n;++r){var i=t+r.toString()+"|",s=this._makePathArray(i.slice(0,-1));"undefined"!=typeof e[r].attributes&&this._indexAttribute(e[r],s),this._indexHtml(e[r],s),"undefined"!=typeof e[r].children&&e[r].children.length&&this._index(e[r].children,i)}},_indexAttribute:function(e,t){for(var n=e.attributes.length,r=0;r<n;++r){var i=e.attributes[r].value.match(this._MATCH_REGEX);if(null!==i)for(var s=i.length,o=0;o<s;++o)this._createIndex(i[o],t),this._indexed[i[o]].push({path:t,attributeName:e.attributes[r].name,attributeIndex:r})}},_indexHtml:function(e,t){for(var n=e.childNodes.length,r=0;r<n;++r)if("#text"===e.childNodes[r].nodeName){var i=e.childNodes[r].nodeValue.match(this._MATCH_REGEX);if(null!==i)for(var s=i.length,o=0;o<s;++o)this._createIndex(i[o],t),this._indexed[i[o]].push({path:t,html:r})}},_makePathArray:function(e){for(var t=e.split("|"),n=t.length,r=0;r<n;++r)t[r]=Number(t[r]);return t},_processMarkup:function(e){this._indexed=new Object,this._parsed=$.parseHTML(e),this._index()},_update:function(e,t){for(var n in t)t.hasOwnProperty(n)&&"undefined"!=typeof this._indexed[n]&&this._updateLabel(e,n,t[n],this._indexed[n]);return e},_updateAttribute:function(e,t,n,r,i){e.setAttribute(r,e.attributes[i].value.replace(new RegExp("%"+t+"%","g"),n))},_updateHtml:function(e,t,n,r){e.childNodes[r].nodeValue=e.childNodes[r].nodeValue.replace(new RegExp("%"+t+"%","g"),n)},_updateLabel:function(e,t,n,r){for(var i=r.length,s=0;s<i;++s){var o=this._getNode(e,r[s].path);null!==o&&("undefined"!=typeof r[s].attributeName?this._updateAttribute(o,t,n,r[s].attributeName,r[s].attributeIndex):"undefined"!=typeof r[s].html&&this._updateHtml(o,t,n,r[s].html))}}})}(window),function(e,t,n){"use strict";e.Server=e.EventingClass.extend({_serverConfig:null,_currentLocation:n.origin+n.pathname,init:function(e){this._super(),this._serverConfig=e||Object.create(null),this._normalizeConfig()},execute:function(n,r,i,s){if(i=i||{},"object"!=typeof r&&(r=[r]),this._serverConfig[n])return t.ajax(e.Helper.merge(!0,this._serverConfig[n],{data:r,beforeSend:i.beforeSend||this._ajax_beforeSend.bind(this,n,r,s),error:i.error||this._ajax_error.bind(this,n,r,s),success:i.success||this._ajax_success.bind(this,n,r,s),complete:i.complete||this._ajax_complete.bind(this,n,r,s)},"get"===this._serverConfig[n].method&&r instanceof Array?{url:this._serverConfig[n].url+"/"+r.join("/"),data:null}:null));throw new Error("Server RPC | Unknown action '"+n+"'")},_ajax_beforeSend:function(e,t,n,r,i){this.emit(e+"-beforeSend",{custom:n,requestData:t,status:i,xhr:r})},_ajax_complete:function(e,t,n,r,i){this.emit(e+"-complete",{custom:n,requestData:t,status:i,xhr:r})},_ajax_error:function(e,t,n,r,i,s){this.emit(e+"-error",{custom:n,httpStatus:s,status:i,xhr:r})},_ajax_success:function(e,t,n,r,i,s){this.emit(e+"-success",{custom:n,responseData:r,requestData:t,status:i,xhr:s})},_normalizeConfig:function(){for(var e in this._serverConfig)this._serverConfig.hasOwnProperty(e)&&(this._resolveUrl(e,this._serverConfig[e]),this._setDefaults(this._serverConfig[e]),void 0===this[e]&&(this[e]=this.execute.bind(this,e)))},_resolveUrl:function(e,t){t.url=t.url||"+=/"+e,t.url&&/^\+=/.test(t.url)?t.url=this._currentLocation+t.url.substr(2):t.url=serverUrl+t.url},_setDefaults:function(t){t.method=t.method||"post",t.headers=t.headers||e.CONST.AJAX_HEADER_JSON}}),e.Server.create=function(t){return new e.Server(t)}}(HeO2_legacy,jQuery,window.location),function(e){"use strict";e.Client=e.EventingClass.extend({_SERVER_CONFIG:null,_server:null,init:function(){this._super(),this._createServer()},_createServer:function(){this._SERVER_CONFIG&&(this._server=e.Server.create(this._SERVER_CONFIG))}})}(HeO2_legacy);
